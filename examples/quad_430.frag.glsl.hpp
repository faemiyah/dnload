static const char *g_shader_fragment_quad = ""
#if defined(USE_LD)
"quad_430.frag.glsl"
#else
"#version 430\n"
"layout(location=0)uniform vec3 e[4];"
"in vec2 i;"
"out vec4 s;"
"void main()"
"{"
"vec2 o=i;"
"if(e[3].t>1.)o.s*=e[3].t;"
"else o.t/=e[3].t;"
"vec3 i=normalize(e[1]),n=normalize(cross(i,e[2])),v=normalize(o.s*n+o.t*normalize(cross(n,i))+i);"
"float l=dot(-e[0],v),t=1.+sin(e[3].s/4444.)*.1;"
"vec3 r=l*v+e[0];"
"float c=dot(r,r);"
"if(c<=t)"
"{"
"vec3 o=(l-sqrt(t*t-c*c))*v+e[0];"
"s=vec4(o*dot(o,vec3(1)),1.);"
"}"
"else s=vec4(.0,.0,.0,1.);"
"}"
#endif
"";
